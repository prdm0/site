<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Pedro Rafael D. Marinho">
<meta name="dcterms.date" content="2022-10-06">

<title>Posts - Série de Taylor, código espaguete e outras coisas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../../img/ozzy.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Posts - Série de Taylor, código espaguete e outras coisas">
<meta property="og:description" content="Uma boa forma de desenvolver fluência em uma linguagem de programação é se submeter a resolver problemas utilizando a linguagem que você deseja aprender.">
<meta property="og:site-name" content="Posts">
<meta name="twitter:title" content="Posts - Série de Taylor, código espaguete e outras coisas">
<meta name="twitter:description" content="Uma boa forma de desenvolver fluência em uma linguagem de programação é se submeter a resolver problemas utilizando a linguagem que você deseja aprender.">
<meta name="twitter:creator" content="@Pedro_Rafael1">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Posts</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about_pt_br.html">Prof.&nbsp;Pedro Rafael</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/prdm0"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Pedro_Rafael1"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/prdm.0/"><i class="bi bi-instagram" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Série de Taylor, código espaguete e outras coisas</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">news</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Prof.&nbsp;Pedro Rafael D. Marinho </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 6, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#série-de-taylor" id="toc-série-de-taylor" class="nav-link active" data-scroll-target="#série-de-taylor">Série de Taylor</a></li>
  <li><a href="#implementação" id="toc-implementação" class="nav-link" data-scroll-target="#implementação">Implementação</a></li>
  <li><a href="#referências" id="toc-referências" class="nav-link" data-scroll-target="#referências">Referências</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><img src="taylor.gif" class="img-fluid"></p>
<p>Uma boa forma de desenvolver fluência em uma linguagem de programação é se submeter a resolver problemas utilizando a linguagem que você deseja aprender. Para quem tem interesse em trabalhar com computação científica, um exercício muito interessante é selecionar alguns problemas básicos na sua área de atuação e tentar resolver! Tente entender bem o problema a ser resolvido e se submeta ao exercício de implementar uma função da forma mais genérica possível.</p>
<p>Esse tópico sugiro meio que por acaso. Na verdade, eu estava na sala de aula, explicando aos meus alunos sobre <a href="https://adv-r.hadley.nz/functionals.html">funcionais em R</a> e dizia a eles que <strong>nem sempre</strong> precisamos utilizar instruções de repetição como <code>for</code>, <code>while</code> e <code>repeat</code> para repetir trechos de códigos, e na aula usei o exemplo das <a href="https://pt.wikipedia.org/wiki/S%C3%A9rie_de_Taylor">séries de Taylor</a>. Tanto na aula, quanto aqui, deixo claro que séries de Taylor não é o tema principal, muito embora o título da postagem possa talvez te confundir a respeito do propósito dessa postagem.</p>
<p>O maior objetivo é fazer com que você possa estudar o código e entender os recursos utilizados para se chegar a solução. Procure entender o papel do funcional <code>sapply()</code>, da função <code>do.call()</code>, do operador dot-dot-dot <code>...</code> e do uso de função anônima no funcional <code>sapply()</code>. Esses são basicamente os principais pontos do código.</p>
<p>Todavia, é claro que eu terei que definir brevemente o que é uma série de Taylor. Afinal, precisamos compreender, de forma clara, o que o código tenta implementar. Tudo bem?! 🤝</p>
<p>Compreender de forma cristalina o problema é a chave 🔐 para desenvolver, de forma consistente, um código coerente e reaproveitável. Tente evitar o código espaguete, em que você até resolve o problema, porém, o reaproveitamento de código e a manutenção do mesmo se torna muito desafiador! Fuja desses tipos de implementações e projetos, pois estes não acrescentam muito no seu aprendizado de programação.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Fuja de códigos espaguetes 🍝
</div>
</div>
<div class="callout-body-container callout-body">
<p>Atualmente, o meu maior pavor 😱 em ajudar alguém em programação é olhar para o código de uma pessoa e ver nele um espaguete com instruções confusas e escritas de forma “enlinhada” (como um espaguete 🍝) e cheios de gambiarras (péssimas práticas de programação) 😥.</p>
<p>Evite muitas condições aninhadas para não cair em uma pirâmide de destruição e acabe construindo código espaguete. Abuse, <strong>na medida do possível</strong>, do uso de funcionais em R.</p>
<p>Eu ministrei uma palestra no <a href="https://sites.google.com/view/workshopparaibano/palestrantes?authuser=0">Workshop Paraibano de Estatística</a>, em 2020, intitulada <strong>Uso de funcionais em R: evitando loops e seus benefícios</strong> e alerto um pouco sobre a necessidade de construirmos códigos que possam ser reutilizáveis e mais fáceis de manter.</p>
<p>Caso deseje ver:</p>
<ol type="1">
<li><p>Para acessar o vídeo da apresentação, clique <a href="https://www.youtube.com/watch?v=rqjII_sA6V8">aqui</a> 📽️;</p></li>
<li><p>Para ter acesso aos slides utilizados, clique <a href="https://prdm0.github.io/palestra_wpbest_2020/#1">aqui</a> 📖.</p></li>
</ol>
<p>Se aproximar do uso de funcionais, quando possível, é um ótimo começo para evitar código espaguete. 🎉</p>
</div>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="pasta_00.png" class="img-fluid figure-img" width="350"></p>
<p></p><figcaption class="figure-caption">Não codifique como um chefe 👨‍🍳 italiano! Macarronada só é saborosa no seu prato! 😋</figcaption><p></p>
</figure>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 67.6%;justify-content: center;">
<p><img src="pasta_face.gif" class="img-fluid" style="width:30.0%" alt="Quando termino de ajudar"> <img src="desconfiado.gif" class="img-fluid" style="width:40.0%" alt="Quando alguém me pede ajuda e me apresenta um código bagunçado. 😶"></p>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 5.4%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
</div>
<p>Uma ótima postagem que encontrei na internet e que poderá ser útil para você entender sobre a importância de se afastar de código espaguete, em R, poderá ser acessada clicando <a href="https://towardsdatascience.com/cleaner-r-code-with-functional-programming-adc37931ef7a"><strong>AQUI</strong></a>. E não se engane, apesar do termo engraçado (código espaguete), há diversos livros na computação sobre o tema.</p>
<section id="série-de-taylor" class="level2">
<h2 class="anchored" data-anchor-id="série-de-taylor">Série de Taylor</h2>
<p>Em matemática, uma série de Taylor é uma soma de funções, de tal forma que</p>
<p><span class="math display">\[f(x) = \sum_{n = 0}^{\infty} a_n(x-a)^n,\]</span> com</p>
<p><span class="math display">\[a_n = \frac{f^{(n)}(a)}{n!},\]</span> em que <span class="math inline">\(f^{(n)}(a)\)</span> é a <span class="math inline">\(n\)</span>-ésima derivada da função <span class="math inline">\(f\)</span> (supostamente sendo infinitamente diferenciável) avaliada no ponto <span class="math inline">\(a\)</span>. Para o caso de <span class="math inline">\(a = 0\)</span>, essa aproximação é denominada de série de Maclaurin.</p>
<p>Por exemplo, considerado <span class="math inline">\(a = 0\)</span>, poderemos aproximar <span class="math inline">\(f(x) = e^x\)</span>, em torno de <span class="math inline">\(a = 0\)</span> por meio da expressão abaixo:</p>
<p><span class="math display">\[e^x \approx \sum_{n = 0}^N \frac{x^n}{n!},\]</span> com <span class="math inline">\(N &lt; \infty\)</span>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Note que temos uma ótima aproximação de <span class="math inline">\(f(x)\)</span>, em torno de <span class="math inline">\(a = 0\)</span>, por meio do polinômio de Taylor, considerando <span class="math inline">\(N = 2\)</span>.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="implementação" class="level2">
<h2 class="anchored" data-anchor-id="implementação">Implementação</h2>
<p>Não irei discutir, nos por menores, a implementação do código, pois certamente seria enfadonho. Estudar o código “não espaguete” 🍝 de outra pessoa é uma boa forma de adquirir conhecimento. O GitHub está aí para você estudar um universo de códigos e melhorar suas práticas de programação, seja em R ou qualquer outra linguagem de programação.</p>
<p>O que eu basicamente fiz foi implementar duas funções:</p>
<ol type="1">
<li><p>A função <code>taylor(n = 1L, func, x, a = 0,...)</code> que recebe o número de somas <code>n</code>, a função <code>func</code> a ser aproximada, um valor <code>x</code> e o valor de <code>a</code>. Também é possível passar argumentos adicionais usando o operador <strong>varargs</strong> dot-dot-dot (<code>...</code>), em que você poderá controlar argumentos da função <code>Deriv()</code> do pacote <a href="https://github.com/sgsokol/Deriv"><strong>Deriv</strong></a> utilizado para o cálculo das derivadas simbólicas de <span class="math inline">\(f(x)\)</span>. O pacote encontra-se no <em>Comprehensive R Archive Network</em> - CRAN e poderá ser instalado fazendo <code>install.packages("Deriv")</code><span class="citation" data-cites="Deriv">(<a href="#ref-Deriv" role="doc-biblioref">Clausen and Sokol 2020</a>)</span>;</p></li>
<li><p>A função <code>plot_taylor(n, func, lower, upper, a)</code> que permitirá que possamos visualizar graficamente a aproximação. Temos que <code>n</code> é a quantidade de somas utilizadas na aproximação, <code>func</code> é a função que desejamos aproximar, <code>lower</code> é o limite inferior do eixo x, <code>upper</code> é o limite superior do eixo <span class="math inline">\(x\)</span> e <code>a</code> é o ponto onde tentaremos uma boa aproximação em seu entorno.</p></li>
</ol>
<p>Note que, em R, funções são objetos de primeira classe. Isso quer dizer que, podemos criar uma função dentro de outra função e, sobretudo, poderemos ter uma função retornando uma função, como é o caso da função <code>an()</code> definida em <code>taylor()</code>. Note que a função <code>an()</code> retorna a função que implementa a derivada de <code>func</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Série de Taylor ---------------------------------------------------------</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>taylor <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> 1L, func, x, <span class="at">a =</span> <span class="dv">0</span>,...){</span>
<span id="cb1-3"><a href="#cb1-3"></a>  an <span class="ot">&lt;-</span> <span class="cf">function</span>(n, ...){</span>
<span id="cb1-4"><a href="#cb1-4"></a>    Deriv<span class="sc">::</span><span class="fu">Deriv</span>(<span class="at">f =</span> func, <span class="at">nderiv =</span> n, ...)</span>
<span id="cb1-5"><a href="#cb1-5"></a>  }</span>
<span id="cb1-6"><a href="#cb1-6"></a>  </span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="cf">if</span>(n <span class="sc">==</span> 1L)</span>
<span id="cb1-8"><a href="#cb1-8"></a>    <span class="fu">return</span>(<span class="fu">func</span>(a))</span>
<span id="cb1-9"><a href="#cb1-9"></a>  </span>
<span id="cb1-10"><a href="#cb1-10"></a>  <span class="fu">sapply</span>(</span>
<span id="cb1-11"><a href="#cb1-11"></a>    <span class="at">X =</span> 1L<span class="sc">:</span>n,</span>
<span id="cb1-12"><a href="#cb1-12"></a>    <span class="at">FUN =</span> \(n, x) <span class="fu">do.call</span>(<span class="fu">an</span>(n, ...), <span class="fu">list</span>(<span class="at">x =</span> x))<span class="sc">/</span><span class="fu">factorial</span>(n) <span class="sc">*</span> (x <span class="sc">-</span> a)<span class="sc">^</span>n,</span>
<span id="cb1-13"><a href="#cb1-13"></a>    <span class="at">x =</span> x</span>
<span id="cb1-14"><a href="#cb1-14"></a>  ) <span class="sc">|&gt;</span> <span class="fu">sum</span>() <span class="sc">+</span> <span class="fu">func</span>(a) </span>
<span id="cb1-15"><a href="#cb1-15"></a>}</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co"># Testando a função taylor(). </span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="fu">taylor</span>(<span class="at">n =</span> 2L, <span class="at">func =</span> \(x) x<span class="sc">^</span><span class="dv">2</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">a =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.75</code></pre>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Derivadas simbólicas
</div>
</div>
<div class="callout-body-container callout-body">
<p>Conhecer derivadas de funções é algo muito corriqueiro na computação científica. Com o pacote <a href="https://CRAN.R-project.org/package=Deriv">Deriv</a> você não precisa se preocupar em derivar simbolicamente (analiticamente) as <span class="math inline">\(n\)</span>-ésimas derivadas de uma função.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Deriv)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Derivando simbolicamente log(1-sin(x)). Perceba que</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  o retorno é uma função R em termos de x.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Deriv</span>(<span class="at">f =</span> \(x) <span class="fu">log</span>(<span class="dv">1</span><span class="sc">-</span><span class="fu">sin</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x) 
-(cos(x)/(1 - sin(x)))</code></pre>
</div>
</div>
<p>É importante destacar que a obtenção de derivadas simbólicas são mais custosas que os métodos numéricos de derivação, sobretudo quando temos interesse de obter ordens elevadas de derivação. Mesmo assim, irei utilizar aqui a biblioteca <a href="https://CRAN.R-project.org/package=Deriv">Deriv</a>, que poderá ser bastante útil em diversas situações. Para a obtenção de derivadas numéricas, estude a biblioteca <a href="https://CRAN.R-project.org/package=numDeriv">numDeriv</a> <span class="citation" data-cites="numDeriv">(<a href="#ref-numDeriv" role="doc-biblioref">Gilbert and Varadhan 2019</a>)</span>.</p>
</div>
</div>
<p>Visualizar graficamente os resultados de uma função poderá nos ajudar na validação da implementação. Comportamentos inadequados na função <code>taylor()</code> seriam facilmente percebidos ao utilizar a função <code>plot_taylor()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">library</span>(glue)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>plot_taylor <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> 1L, func, a, <span class="at">lower =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">upper =</span> <span class="dv">1</span>, ...){</span>
<span id="cb5-6"><a href="#cb5-6"></a>  x <span class="ot">&lt;-</span> <span class="fu">seq</span>(lower, upper, <span class="at">length.out =</span> 100L)</span>
<span id="cb5-7"><a href="#cb5-7"></a>  y <span class="ot">&lt;-</span> <span class="fu">func</span>(x)</span>
<span id="cb5-8"><a href="#cb5-8"></a>  </span>
<span id="cb5-9"><a href="#cb5-9"></a>  y_taylor <span class="ot">&lt;-</span> </span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="fu">sapply</span>(</span>
<span id="cb5-11"><a href="#cb5-11"></a>      <span class="at">X =</span> x,</span>
<span id="cb5-12"><a href="#cb5-12"></a>      <span class="at">FUN =</span> \(x) <span class="fu">taylor</span>(<span class="at">n =</span> n, <span class="at">func =</span> func, <span class="at">x =</span> x, <span class="at">a =</span> a, ...)</span>
<span id="cb5-13"><a href="#cb5-13"></a>    )</span>
<span id="cb5-14"><a href="#cb5-14"></a>  </span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb5-16"><a href="#cb5-16"></a>    <span class="at">x =</span> <span class="fu">c</span>(x, x), </span>
<span id="cb5-17"><a href="#cb5-17"></a>    <span class="at">y =</span> <span class="fu">c</span>(y, y_taylor),</span>
<span id="cb5-18"><a href="#cb5-18"></a>    <span class="at">classe =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"f(x)"</span>, 100L), <span class="fu">rep</span>(<span class="st">"Taylor"</span>, 100L))</span>
<span id="cb5-19"><a href="#cb5-19"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb5-20"><a href="#cb5-20"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb5-21"><a href="#cb5-21"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> classe), <span class="at">size =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb5-22"><a href="#cb5-22"></a>    <span class="fu">geom_point</span>(<span class="at">x =</span> a, <span class="at">y =</span> <span class="fu">func</span>(a), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb5-23"><a href="#cb5-23"></a>    <span class="fu">ggtitle</span>(</span>
<span id="cb5-24"><a href="#cb5-24"></a>      <span class="at">label =</span> <span class="st">"Série de Taylor"</span>, </span>
<span id="cb5-25"><a href="#cb5-25"></a>      <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Aproximação de uma função f(x)</span><span class="sc">\n</span><span class="st"> n = {n}"</span>) </span>
<span id="cb5-26"><a href="#cb5-26"></a>    ) <span class="sc">+</span></span>
<span id="cb5-27"><a href="#cb5-27"></a>    <span class="fu">ylab</span>(<span class="st">"f(x)"</span>) <span class="sc">+</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"tomato"</span>)) <span class="sc">+</span> </span>
<span id="cb5-29"><a href="#cb5-29"></a>    <span class="fu">theme</span>(</span>
<span id="cb5-30"><a href="#cb5-30"></a>      <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb5-31"><a href="#cb5-31"></a>    ) <span class="sc">+</span> </span>
<span id="cb5-32"><a href="#cb5-32"></a>    <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">""</span>) </span>
<span id="cb5-33"><a href="#cb5-33"></a>}</span>
<span id="cb5-34"><a href="#cb5-34"></a></span>
<span id="cb5-35"><a href="#cb5-35"></a><span class="co"># Aproximando func em torno de "a" ----------------------------------------</span></span>
<span id="cb5-36"><a href="#cb5-36"></a>p1 <span class="ot">&lt;-</span> <span class="fu">plot_taylor</span>(</span>
<span id="cb5-37"><a href="#cb5-37"></a>  <span class="at">n =</span> <span class="dv">3</span>,</span>
<span id="cb5-38"><a href="#cb5-38"></a>  <span class="at">func =</span> \(x) <span class="fu">exp</span>(x),</span>
<span id="cb5-39"><a href="#cb5-39"></a>  <span class="at">lower =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb5-40"><a href="#cb5-40"></a>  <span class="at">upper =</span> <span class="dv">1</span>,</span>
<span id="cb5-41"><a href="#cb5-41"></a>  <span class="at">a =</span> <span class="fl">0.5</span></span>
<span id="cb5-42"><a href="#cb5-42"></a>)</span>
<span id="cb5-43"><a href="#cb5-43"></a></span>
<span id="cb5-44"><a href="#cb5-44"></a>p2 <span class="ot">&lt;-</span> <span class="fu">plot_taylor</span>(</span>
<span id="cb5-45"><a href="#cb5-45"></a>  <span class="at">n =</span> <span class="dv">3</span>,</span>
<span id="cb5-46"><a href="#cb5-46"></a>  <span class="at">func =</span> \(x) x<span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb5-47"><a href="#cb5-47"></a>  <span class="at">lower =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb5-48"><a href="#cb5-48"></a>  <span class="at">upper =</span> <span class="dv">1</span>,</span>
<span id="cb5-49"><a href="#cb5-49"></a>  <span class="at">a =</span> <span class="fl">0.5</span></span>
<span id="cb5-50"><a href="#cb5-50"></a>)</span>
<span id="cb5-51"><a href="#cb5-51"></a></span>
<span id="cb5-52"><a href="#cb5-52"></a>p3 <span class="ot">&lt;-</span> <span class="fu">plot_taylor</span>(</span>
<span id="cb5-53"><a href="#cb5-53"></a>  <span class="at">n =</span> <span class="dv">3</span>,</span>
<span id="cb5-54"><a href="#cb5-54"></a>  <span class="at">func =</span> \(x) <span class="dv">3</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb5-55"><a href="#cb5-55"></a>  <span class="at">lower =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb5-56"><a href="#cb5-56"></a>  <span class="at">upper =</span> <span class="dv">1</span>,</span>
<span id="cb5-57"><a href="#cb5-57"></a>  <span class="at">a =</span> <span class="dv">0</span></span>
<span id="cb5-58"><a href="#cb5-58"></a>)</span>
<span id="cb5-59"><a href="#cb5-59"></a></span>
<span id="cb5-60"><a href="#cb5-60"></a>p4 <span class="ot">&lt;-</span> <span class="fu">plot_taylor</span>(</span>
<span id="cb5-61"><a href="#cb5-61"></a>  <span class="at">n =</span> <span class="dv">3</span>,</span>
<span id="cb5-62"><a href="#cb5-62"></a>  <span class="at">func =</span> \(x) <span class="dv">15</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span> <span class="sc">-</span> <span class="dv">14</span><span class="sc">*</span>x <span class="sc">+</span> <span class="dv">7</span>,</span>
<span id="cb5-63"><a href="#cb5-63"></a>  <span class="at">lower =</span> <span class="sc">-</span><span class="fl">0.8</span>,</span>
<span id="cb5-64"><a href="#cb5-64"></a>  <span class="at">upper =</span> <span class="dv">2</span>,</span>
<span id="cb5-65"><a href="#cb5-65"></a>  <span class="at">a =</span> <span class="fl">1.5</span></span>
<span id="cb5-66"><a href="#cb5-66"></a>)</span>
<span id="cb5-67"><a href="#cb5-67"></a></span>
<span id="cb5-68"><a href="#cb5-68"></a>(p1 <span class="sc">+</span> p2)<span class="sc">/</span>(p3 <span class="sc">+</span> p4) <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">"I"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="referências" class="level2">




</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">Referências</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-Deriv" class="csl-entry" role="doc-biblioentry">
Clausen, Andrew, and Serguei Sokol. 2020. <span>“<span></span>Deriv<span></span>: R-Based Symbolic Differentiation.”</span> <a href="https://CRAN.R-project.org/package=Deriv">https://CRAN.R-project.org/package=Deriv</a>.
</div>
<div id="ref-numDeriv" class="csl-entry" role="doc-biblioentry">
Gilbert, Paul, and Ravi Varadhan. 2019. <span>“numDeriv: Accurate Numerical Derivatives.”</span> <a href="https://CRAN.R-project.org/package=numDeriv">https://CRAN.R-project.org/package=numDeriv</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="prdm0/site" data-repo-id="R_kgDOIAwixg" data-category="General" data-category-id="DIC_kwDOIAwixs4CRgU8" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>